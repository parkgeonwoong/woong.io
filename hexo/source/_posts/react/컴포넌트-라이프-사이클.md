---
title: ì»´í¬ë„ŒíŠ¸ ë¼ì´í”„ ì‚¬ì´í´
date: 2022-02-21 23:12:05
tags:
toc: true
categories:
  - React
  - Document
---

# ğŸ“Œ ì»´í¬ë„ŒíŠ¸ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ

[State and Lifecycle - React](https://ko.reactjs.org/docs/state-and-lifecycle.html)

<br>

- [ğŸ“Œ ì»´í¬ë„ŒíŠ¸ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ](#-ì»´í¬ë„ŒíŠ¸-ë¼ì´í”„ì‚¬ì´í´-ë©”ì„œë“œ)
  - [âœ… ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ì´í•´](#-ë¼ì´í”„ì‚¬ì´í´-ë©”ì„œë“œ-ì´í•´)
    - [ğŸ”¸ render() í•¨ìˆ˜](#-render-í•¨ìˆ˜)
    - [ğŸ”¸ getDerivedStateFromProps](#-getderivedstatefromprops)
    - [ğŸ”¸ componentDidMount](#-componentdidmount)
    - [ğŸ”¸ shouldComponentUpdate](#-shouldcomponentupdate)
    - [ğŸ”¸ getSnapshotBeforeUpdate](#-getsnapshotbeforeupdate)
    - [ğŸ”¸ componentDidUpdate](#-componentdidupdate)
    - [ğŸ”¸ componentWillUnmount](#-componentwillunmount)
    - [ğŸ”¸componentDidCatch](#componentdidcatch)
  - [âœ… ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ì‚¬ìš©](#-ë¼ì´í”„ì‚¬ì´í´-ë©”ì„œë“œ-ì‚¬ìš©)
    - [ğŸ”¸ ì •ë¦¬](#-ì •ë¦¬)

<br>

<!-- more -->

- ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ê°€ë” ì»´í¬ë„ŒíŠ¸ë¥¼ ì²˜ìŒìœ¼ë¡œ ë Œë”ë§í•  ë•Œ ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬í•´ì•¼í•˜ê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ì „í›„ë¡œ ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬í•´ì•¼ í•  ìˆ˜ë„ ìˆê³ , ë˜ ë¶ˆí•„ìš”í•œ ì—…ë°ì´íŠ¸ë¥¼ ë°©ì§€í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤
- ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œëŠ” í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ë§Œ ì‚¬ìš© ê°€ëŠ¥
- í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” Hooks ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì—… ì²˜ë¦¬

<br>

## âœ… ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ì´í•´

- `will ì ‘ë‘ì‚¬`ê°€ ë¶™ì€ ë©”ì„œë“œëŠ” ì–´ë–¤ ì‘ì—…ì„ ì‘ë™í•˜ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ
- `Did ì ‘ë‘ì‚¬`ê°€ ë¶™ì€ ë©”ì„œë“œëŠ” ì–´ë–¤ ì‘ì—…ì„ ì‘ë™í•œ í›„ì— ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ

```markdown
# ë§ˆìš´íŠ¸(mount)

: DOMì´ ìƒì„±ë˜ê³  ì›¹ ë¸Œë¼ìš°ì €ìƒì— ë‚˜íƒ€ë‚˜ëŠ” ê²ƒ

ë§ˆìš´íŠ¸í•  ë•Œ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ

- constructor : ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” í´ë˜ìŠ¤ ìƒì„±ì ë©”ì„œë“œ
- getDerivedStateFromProps : propsì— ìˆëŠ” ê°’ì„ stateì— ë„£ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ
- render : ìš°ë¦¬ê°€ ì¤€ë¹„í•œ UIë¥¼ ë Œë”ë§í•˜ëŠ” ë©”ì„œë“œ
- componentDidMount : ì»´í¬ë„ŒíŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì €ìƒì— ë‚˜íƒ€ë‚œ í›„ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ
```

```markdown
# ì—…ë°ì´íŠ¸

ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë„¤ ê°€ì§€ ê²½ìš°ì— ì—…ë°ì´íŠ¸ í•œë‹¤

1. propsê°€ ë°”ë€” ë•Œ
2. stateê°€ ë°”ë€” ë•Œ
3. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë  ë•Œ
4. this.forceUpdateë¡œ ê°•ì œë¡œ ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ë•Œ

ì—…ë°ì´íŠ¸í•  ë•Œ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ

- getDerivedStateFromProps : ë§ˆìš´íŠ¸ ê³¼ì •ì—ì„œë„ í˜¸ì¶œë˜ë©°,
  propsì˜ ë³€í™”ì— ë”°ë¼ state ê°’ì—ë„ ë³€í™”ë¥¼ ì£¼ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
- shouldComponentUpdate : ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ì„ í•´ì•¼ í• ì§€ ë§ì•„ì•¼ í• ì§€ ê²°ì •í•˜ëŠ” ë©”ì„œë“œ
  true ë°˜í™˜ -> ë‹¤ìŒ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ê³„ì† ì‹¤í–‰, false ë°˜í™˜ -> ì‘ì—… ì¤‘ì§€
- render : ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
- getSnapshotBeforeUpdate : ì»´í¬ë„ŒíŠ¸ ë³€í™”ë¥¼ DOMì— ë°˜ì˜í•˜ê¸° ë°”ë¡œ ì§ì „ì— í˜¸ì¶œ
- componentDidUpdate : ì»´í¬ë„ŒíŠ¸ì˜ ì—…ë°ì´íŠ¸ ì‘ì—…ì´ ëë‚œ í›„ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ
```

```markdown
# ì–¸ë§ˆìš´íŠ¸

ì»´í¬ë„ŒíŠ¸ë¥¼ DOMì—ì„œ ì œê±°í•˜ëŠ” ê²ƒì€ ì–¸ë§ˆìš´íŠ¸

ì–¸ë§ˆìš´íŠ¸í•  ë•Œ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ

- componentWillUnmount : ì»´í¬ë„ŒíŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì €ìƒì—ì„œ ì‚¬ë¼ì§€ê¸° ì „ì— í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ
```

<br>

### ğŸ”¸ render() í•¨ìˆ˜

- ì´ ë©”ì„œë“œ ì•ˆì—ì„œ this.props ì™€ this.stateì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©°, ë¦¬ì•¡íŠ¸ ìš”ì†Œë¥¼ ë°˜í™˜í•œë‹¤
- ìš”ì†ŒëŠ” div ê°™ì€ íƒœê·¸ë‚˜ ë”°ë¡œ ì„ ì–¸í•œ ì»´í¬ë„ŒíŠ¸ê°€ ë  ìˆ˜ë„ ìˆë‹¤
- ì´ ë©”ì„œë“œ ì•ˆì—ì„œëŠ” ì´ë²¤íŠ¸ ì„¤ì •ì´ ì•„ë‹Œ ê³³ì—ì„œ setStateë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆë¨, ë¸Œë¼ìš°ì € DOMì— ì ‘ê·¼í•´ë„ ì•ˆë¨
- DOMì— ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ stateì— ë³€í™”ë¥¼ ì¤„ ë•ŒëŠ” componentDidMountì— ì²˜ë¦¬

```jsx
render() { ... }
```

<br>

### ğŸ”¸ getDerivedStateFromProps

- propsë¡œ ë°›ì•„ ì˜¨ ê°’ì„ stateì— ë™ê¸°í™”ì‹œí‚¤ëŠ” ìš©ë„ë¡œ ì‚¬ìš©
- ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œì™€ ì—…ë°ì´íŠ¸ë  ë•Œ í˜¸ì¶œëœë‹¤

```jsx
static getDerivedStateFromProps(nextProps, prevState) {
	if(nextProps.value !== prevState.value) {
		return { value: nextProps.value }
	}
	return null // stateë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤ë©´
}
```

<br>

### ğŸ”¸ componentDidMount

- ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³ , ì²« ë Œë”ë§ì„ ë‹¤ ë§ˆì¹œ í›„ ì‹¤í–‰
- ì´ ì•ˆì—ì„œ ë‹¤ë¥¸ JS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” í”„ë ˆì„ì›Œí¬ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
- ì´ë²¤íŠ¸ ë“±ë¡, setTimeout, setInterval, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê°™ì€ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬

```jsx
componentDidMount() { ... }
```

<br>

### ğŸ”¸ shouldComponentUpdate

- props ë˜ëŠ” stateë¥¼ ë³€ê²½í–ˆì„ ë•Œ, ë¦¬ë Œë”ë§ì„ ì‹œì‘í• ì§€ ì—¬ë¶€ë¥¼ ì§€ì •í•˜ëŠ” ë©”ì„œë“œ
- ì´ ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ true ë˜ëŠ” falseì„ ë°˜í™˜í•´ì•¼ í•œë‹¤ (default = true)
- ì´ ë©”ì„œë“œ ì•ˆì—ì„œ í˜„ì¬ propsì™€ stateëŠ” this.propsì™€ this.stateë¡œ ì ‘ê·¼í•˜ê³ , ìƒˆë¡œ ì„¤ì •ë  props, stateëŠ” nextProps, nextStateë¡œ ì ‘ê·¼
- í”„ë¡œì íŠ¸ ì„±ëŠ¥ì„ ìµœì í™”í•  ë•Œ, ìƒí™©ì— ë§ëŠ” ì•Œê³ ë¦¬ì¦˜ ë¦¬ë Œë”ë§ì„ ë°©ì§€í•  ë–„ â†’ false

```jsx
shouldComponentUpdate(nextProps, nextState) { ... }
```

<br>

### ğŸ”¸ getSnapshotBeforeUpdate

- ì´ ë©”ì„œë“œëŠ” renderì—ì„œ ë§Œë“¤ì–´ì§„ ê²°ê³¼ë¬¼ì´ ë¸Œë¼ìš°ì €ì— ì‹¤ì œë¡œ ë°˜ì˜ë˜ê¸° ì§ì „ì— í˜¸ì¶œ
- ì´ ë©”ì„œë“œì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì€ componentDidUpdateì—ì„œ ì„¸ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì¸ snapshot ê°’ìœ¼ë¡œ ì „ë‹¬
- ì£¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ì§ì „ì˜ ê°’ì„ ì°¸ê³ í•  ì¼ì´ ìˆì„ ë•Œ

```jsx
getSnapSshotBeforeUpdate(prevProps, prevState) { .... }
```

<br>

### ğŸ”¸ componentDidUpdate

- ë¦¬ë Œë”ë§ì„ ì™„ë£Œí•œ í›„ ì‹¤í–‰í•œë‹¤
- ì—…ë°ì´íŠ¸ê°€ ëë‚œ ì§í›„ì´ë¯€ë¡œ, DOM ê´€ë ¨ ì²˜ë¦¬ë¥¼ í•´ë„ ë¬´ë°©
- íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ì´ì „ì— ê°€ì¡Œë˜ ë°ì´í„°ì— ì ‘ê·¼ ê°€ëŠ¥

```jsx
componentDidUpdate(prevProps, prevState, snapshot) { ... }
```

<br>

### ğŸ”¸ componentWillUnmount

- ì»´í¬ë„ŒíŠ¸ë¥¼ DOMì—ì„œ ì œê±°í•  ë•Œ ì‹¤í–‰í•œë‹¤
- componentDidMount ì—ì„œ ë“±ë¡í•œ ì´ë²¤íŠ¸, íƒ€ì´ë¨¸, ì§ì ‘ ìƒì„±í•œ DOMì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ì œê±° ì‘ì—…ì„ í•´ì•¼ í•œë‹¤

```jsx
componentWillUnmount() { ... }
```

<br>

### ğŸ”¸componentDidCatch

- ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë„ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¨¹í†µì´ ë˜ì§€ ì•Šê³  ì˜¤ë¥˜ UIë¥¼ ë³´ì—¬ì¤Œ

```jsx
componentDidCatch(error, info) {
	this.setState({
		error: true
	});
	clg({error, info})
}
```

<br>

## âœ… ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ì‚¬ìš©

```jsx
import { Component } from "react";

class LifeCycleSample extends Component {
  state = {
    number: 0,
    color: null,
  };

  myRef = null;

  constructor(props) {
    super(props);
    console.log("constructor");
  }

  static getDerivedStateFromProps(nextProps, prevState) {
    console.log("getDerivedStateFromProps");
    if (nextProps.color !== prevState.color) {
      return { color: nextProps.color };
    }
    return null;
  }

  componentDidMount() {
    console.log("componentDidMount");
  }

  shouldComponentUpdate(nextProps, nextState) {
    console.log("shouldComponentUpdate", nextProps, nextState);
    return nextProps.number % 10 !== 4;
  }

  componentWillUnmount() {
    console.log("componentWillUnmount");
  }

  handleClick = () => {
    this.setState({
      number: this.state.number + 1,
    });
  };

  getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log("getSnapshotBeforeUpdate");
    if (prevProps.color !== this.props.color) {
      return this.myRef.style.color;
    }
    return null;
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log("componentDidUpdate", prevProps, prevState);
    if (snapshot) {
      console.log("ì—…ë°ì´íŠ¸ë˜ê¸° ì „ì— ìƒ‰ìƒ: ", snapshot);
    }
  }

  render() {
    console.log("render");

    const style = {
      color: this.props.color,
    };
    return (
      <div>
        <h1 style={style} ref={(ref) => (this.myRef = ref)}>
          {this.state.number}
        </h1>
        <p>color: {this.state.color}</p>
        <button onClick={this.handleClick}>ë”í•˜ê¸°</button>
      </div>
    );
  }
}

export default LifeCycleSample;
```

```jsx
function getRandomColor() {
  return "#" + Math.floor(Math.random() * 16777215).toString(16);
}

class App extends Component {
  state = {
    color: "#000000",
  };

  handleClick = () => {
    this.setState({
      color: getRandomColor(),
    });
  };

  render() {
    return (
      <div>
        <button onClick={this.handleClick}>ëœë¤ ìƒ‰ìƒ</button>
        <LifeCycleSample color={this.state.color} />;
      </div>
    );
  }
}
```

<br>

### ğŸ”¸ ì •ë¦¬

![](/images/react/Untitled.png)

ì¶œì²˜ : [https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/](https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)
